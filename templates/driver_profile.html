{% extends "base.html" %}

{% block title %}{{ driver.name }}{% endblock %}

{% block content %}

<div class="profile-header">
    <div>
        <h1>{{ driver.name }}</h1>
        <p class="muted">{{ driver.team }}</p>
    </div>

    {% if session.get("user_id") %}
        <a href="/favorite/driver/{{ driver_id }}" class="btn">
            ★ Add to Favorites
        </a>
    {% endif %}
</div>

<div class="profile-grid">
    <!-- LEFT: STATS -->
    <div class="profile-stats">
        <h2>Season Points</h2>

        <table class="points-table">
            <thead>
                <tr>
                    <th>Season</th>
                    <th>Points</th>
                </tr>
            </thead>
            <tbody>
                {% for row in points %}
                    <tr>
                        <td>{{ row.year }}</td>
                        <td>{{ row.points }}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- RIGHT: IMAGE -->
    <div class="profile-image">
        {% set image_name = driver.name
            | lower
            | replace(' ', '_')
            | replace('é', 'e')
            | replace('í', 'i')
            | replace('ó', 'o')
            | replace('á', 'a')
        %}

        <img
            src="/static/images/drivers/{{ image_name }}.jpg"
            alt="{{ driver.name }}"
            onerror="this.src='/static/images/drivers/placeholder.jpg'"
        >
    </div>
</div>

{% endblock %}
